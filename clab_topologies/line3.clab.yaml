name: ${CLAB_LAB_NAME:=line3}
mgmt:
  network: ${CLAB_MGMT_NETWORK:=clab-mgmt-line3}
  ipv4-subnet: ${CLAB_MGMT_IPV4_SUBNET:=10.240.9.0/24}
  ipv6-subnet: ${CLAB_MGMT_IPV6_SUBNET:=fd00:f0:9::/64}
  external-access: ${CLAB_MGMT_EXTERNAL_ACCESS:=false}
topology:
  kinds:
    linux:
      image: ${CLAB_NODE_IMAGE:=ghcr.io/srl-labs/network-multitool:latest}
  nodes:
    r1:
      kind: linux
      exec:
        - ip link set eth1 up
        - ip addr replace 10.9.1.1/30 dev eth1
        - sysctl -w net.ipv4.ip_forward=1
    r2:
      kind: linux
      exec:
        - ip link set eth1 up
        - ip addr replace 10.9.1.2/30 dev eth1
        - ip link set eth2 up
        - ip addr replace 10.9.2.1/30 dev eth2
        - sysctl -w net.ipv4.ip_forward=1
    r3:
      kind: linux
      exec:
        - ip link set eth1 up
        - ip addr replace 10.9.2.2/30 dev eth1
        - sysctl -w net.ipv4.ip_forward=1
  links:
    - endpoints: ["r1:eth1", "r2:eth1"]
    - endpoints: ["r2:eth2", "r3:eth1"]
