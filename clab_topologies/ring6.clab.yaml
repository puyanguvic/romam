name: ring6
mgmt:
  network: clab-mgmt-ring6
  ipv4-subnet: 10.240.11.0/24
  ipv6-subnet: fd00:f0:11::/64
topology:
  kinds:
    linux:
      image: ghcr.io/srl-labs/network-multitool:latest
  nodes:
    r1:
      kind: linux
      exec:
        - ip link set eth1 up
        - ip addr replace 10.11.1.1/30 dev eth1
        - ip link set eth2 up
        - ip addr replace 10.11.6.2/30 dev eth2
        - sysctl -w net.ipv4.ip_forward=1
    r2:
      kind: linux
      exec:
        - ip link set eth1 up
        - ip addr replace 10.11.1.2/30 dev eth1
        - ip link set eth2 up
        - ip addr replace 10.11.2.1/30 dev eth2
        - sysctl -w net.ipv4.ip_forward=1
    r3:
      kind: linux
      exec:
        - ip link set eth1 up
        - ip addr replace 10.11.2.2/30 dev eth1
        - ip link set eth2 up
        - ip addr replace 10.11.3.1/30 dev eth2
        - sysctl -w net.ipv4.ip_forward=1
    r4:
      kind: linux
      exec:
        - ip link set eth1 up
        - ip addr replace 10.11.3.2/30 dev eth1
        - ip link set eth2 up
        - ip addr replace 10.11.4.1/30 dev eth2
        - sysctl -w net.ipv4.ip_forward=1
    r5:
      kind: linux
      exec:
        - ip link set eth1 up
        - ip addr replace 10.11.4.2/30 dev eth1
        - ip link set eth2 up
        - ip addr replace 10.11.5.1/30 dev eth2
        - sysctl -w net.ipv4.ip_forward=1
    r6:
      kind: linux
      exec:
        - ip link set eth1 up
        - ip addr replace 10.11.5.2/30 dev eth1
        - ip link set eth2 up
        - ip addr replace 10.11.6.1/30 dev eth2
        - sysctl -w net.ipv4.ip_forward=1
  links:
    - endpoints: ["r1:eth1", "r2:eth1"]
    - endpoints: ["r2:eth2", "r3:eth1"]
    - endpoints: ["r3:eth2", "r4:eth1"]
    - endpoints: ["r4:eth2", "r5:eth1"]
    - endpoints: ["r5:eth2", "r6:eth1"]
    - endpoints: ["r6:eth2", "r1:eth2"]
